!function(t){var e=function(){function t(){this.callbacks=[]}return t.prototype.on=function(t,e){return this.callbacks.push({event:t,fn:e}),this},t.prototype.off=function(t,e){return this.callbacks=this.callbacks.filter(function(n){return!(n.event===t&&n.fn===e)}),this},t.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return this.on(t,n),this},t.prototype.emit=function(t){for(var e=this,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return this.callbacks.filter(function(e){return e.event===t}).forEach(function(t){t.fn.apply(e,n)}),this},t}(),n=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),o=["alt","src","title","value","placeholder","label"],i=function(t){function e(e,n){void 0===e&&(e="cn");var i=t.call(this)||this;return i._defaultLang=e,i._locale=e,i._attrs=n||o,i._dictionarys={},i}return n(e,t),e.prototype.dictionary=function(t){var e=this;t&&Object.keys(t).forEach(function(n){e._dictionarys[n]=t[n]})},e.prototype.parse=function(t){var e,n={optionsLang:{},locale:null,localeText:null};if(t=String(t).replace(/<!--\{([\w-]+)\}-->([^]*?)<!--\/\{\1\}-->|<!--\{([\w-]+|\*)\}([^]*?)-->/g,function(t,o,i,a,r){return e=!0,o?(n.locale=o,n.localeText=i,n.optionsLang[o]=i):n.optionsLang[a]=r,""}),!e)return null;if(t=t.trim(),t&&(n.defaultText=t,n.optionsLang[this._defaultLang]||(n.optionsLang[this._defaultLang]=t)),void 0!==n.optionsLang["*"]){var o;o=""===n.optionsLang["*"]?this.parse(this._dictionarys[t]):this.parse(this._dictionarys[n.optionsLang["*"]]),o&&(Object.keys(o.optionsLang).forEach(function(t){n.optionsLang[t]=o.optionsLang[t]}),n.locale=n.locale||o.locale,n.localeText=n.localeText||o.localeText)}return n},e.prototype.build=function(t,e){var n="";if(Object.keys(e.optionsLang).forEach(function(o){var i=e.optionsLang[o];n+=o===t?"\x3c!--{"+o+"}--\x3e"+i+"\x3c!--/{"+o+"}--\x3e":"\x3c!--{"+o+"}"+i+"--\x3e"}),!e.optionsLang[t]){var o=this._defaultLang,i=e.optionsLang[this._defaultLang]||"";n+="\x3c!--{"+o+"}--\x3e"+i+"\x3c!--/{"+o+"}--\x3e"}return n},e.prototype.update=function(t,e){var n=this;if(t=t||this._locale,this._locale!==t&&(this._locale=t,this.emit("change",t)),"undefined"!=typeof document){e?"string"==typeof e&&(e=document.querySelector(e)):e=document.documentElement;for(var o,i=document.createNodeIterator(e,NodeFilter.SHOW_COMMENT,null,!1),a=[],r=[];o=i.nextNode();)a.indexOf(o.parentNode)>=0||/^(script|style|link)$/i.test(o.parentNode.nodeName)||!/^\{[\w-]+\}/.test(o.nodeValue)||(a.push(o.parentNode),r.push(this.parse(o.parentNode.innerHTML)));if(a.forEach(function(e,o){e.innerHTML=n.build(t,r[o])}),this._attrs.forEach(function(o){var i="data-lang-"+o;[].slice.call(e.querySelectorAll("["+i+"]")).forEach(function(e){var a=e.getAttribute(i),r=n.parse(a);r&&(r.optionsLang[n._defaultLang]||(r.optionsLang[n._defaultLang]=e.getAttribute(o)),e.setAttribute(i,n.build(t,r)),e.setAttribute(o,r.optionsLang[t]||r.optionsLang[n._defaultLang]))})}),e===document.documentElement){var c=document.querySelector("title");if(c&&c.hasAttribute("data-lang-content")){var l=c.getAttribute("data-lang-content"),s=this.parse(l);if(!s)return;s.optionsLang[this._defaultLang]||(s.optionsLang[this._defaultLang]=c.textContent),c.setAttribute("data-lang-content",this.build(t,s)),c.textContent=s.optionsLang[t]||s.optionsLang[this._defaultLang]}}}},e.prototype.get=function(t,e){e=e||this._locale;var n=this.parse(t);return n?void 0!==n.optionsLang[e]?n.optionsLang[e]:void 0!==n.defaultText?n.defaultText:n.optionsLang[this._defaultLang]:t},Object.defineProperty(e.prototype,"locale",{get:function(){return this._locale},set:function(t){this._locale!==t&&this.update(t)},enumerable:!0,configurable:!0}),e.prototype.replace=function(t,e,n){var o=this;for(t=String(t).replace(/((?:(?:\w+\.)+)get)\((['"`])(.*?-->)\2\)/g,function(t,i,a,r){if(n){var c=n("code",r);if(c){return i+"("+a+o.build(o._locale,c)+a+")"}}return a+o.get(r,e)+a}).replace(/<title(?=\s)((?:"[^"]*"|'[^']*'|[^'"<>])*?)\s+data-lang-content=('|")(.*?)\2((?:"[^"]*"|'[^']*'|[^'"<>])*)>([^]*?)<\/title>/g,function(t,i,a,r,c,l){return n&&n("title",l+r),"<title"+i+c+">"+o.get(l+r,e)+"</title>"}).replace(/<("[^"]*"|'[^']*'|[^'"<>])+(data-lang-\w+)("[^"]*"|'[^']*'|[^'"<>])+>/g,function(t){var i={};return t=t.replace(/((?:\s*)(?:[\w-])*)data-lang((?:-\w+)+)\s*=\s*(['"])([^]*?)(\3)/g,function(t,e,n,o,a){return e.trim()?t:(i[n.slice(1)]=a,e.trim())}),Object.keys(i).forEach(function(a){t=t.replace(new RegExp("(['\"\\s]"+a+"\\s*=\\s*)(['\"])([^]*?)(\\2)","g"),function(t,r,c,l){return n&&n("attribute",l+i[a]),r+c+o.get(l+i[a],e)+c})}),t});;){var i=t.match(/((?:<!--\{(?:[\w*]+)\}.*?-->\s*)+)(<\/(\w+)>)/);if(!i)break;var a=i[3],r=i[1],c=RegExp["$`"],l=i[2]+RegExp["$'"];if(!(i=c.match(new RegExp("<("+a+")(?:\"[^\"]*\"|'[^']*'|[^\"'>])*>(?![^]*<\\1(?:\"[^\"]*\"|'[^']*'|[^\"'>])*>)"))))break;r=RegExp["$'"]+r,c=c.slice(0,i.index)+i[0],n&&n("element",r),t=c+this.get(r,e)+l}return t},e}(e),a={Languages:i};"function"==typeof define?(define.amd||define.cmd)&&define(function(){return a}):"undefined"!=typeof module&&module.exports?module.exports=a:window.h5i18n=a}();