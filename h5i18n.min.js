!function(t){function e(){function t(t,e){return a.push({event:t,fn:e}),i}function e(t,e){return a=a.filter(function(n){return!(n.event===t&&n.fn===e)}),i}function n(n,o){function a(){e(n,a),o.apply(i,arguments)}return t(n,a),i}function o(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return a.filter(function(e){return e.event===t}).forEach(function(t){t.fn.apply(i,e)}),i}var i,a=[];return i={emit:o,on:t,off:e,once:n}}var n=["alt","src","title","value","placeholder","label"],o=function(){function t(t,o){void 0===t&&(t="cn"),this._defaultLocale=t,this._locale=t,this._attrs=o||n,this._dictionarys={},this._emitter=e()}return t.prototype.dictionary=function(t){var e=this;t&&Object.keys(t).forEach(function(n){e._dictionarys[n]=t[n]})},t.prototype.on=function(t,e){return this._emitter.on(t,e),this},t.prototype.once=function(t,e){return this._emitter.once(t,e),this},t.prototype.off=function(t,e){return this._emitter.off(t,e),this},t.prototype.parse=function(t){var e,n={optionsLang:{},locale:null,localeText:null};if(t=String(t).replace(/<!--\{([\w-]+)\}-->([^]*?)<!--\/\{\1\}-->|<!--\{([\w-]+|\*)\}([^]*?)-->/g,function(t,o,i,a,r){return e=!0,o?(n.locale=o,n.localeText=i,n.optionsLang[o]=i):n.optionsLang[a]=r,""}),!e)return null;if(t=t.trim(),t&&(n.defaultText=t,n.optionsLang[this._defaultLocale]||(n.optionsLang[this._defaultLocale]=t)),void 0!==n.optionsLang["*"]){var o;o=""===n.optionsLang["*"]?this.parse(this._dictionarys[t]):this.parse(this._dictionarys[n.optionsLang["*"]]),o&&(Object.keys(o.optionsLang).forEach(function(t){n.optionsLang[t]=o.optionsLang[t]}),n.locale=n.locale||o.locale,n.localeText=n.localeText||o.localeText)}return n},t.prototype.build=function(t,e){var n="";if(Object.keys(e.optionsLang).forEach(function(o){var i=e.optionsLang[o];n+=o===t?"\x3c!--{"+o+"}--\x3e"+i+"\x3c!--/{"+o+"}--\x3e":"\x3c!--{"+o+"}"+i+"--\x3e"}),!e.optionsLang[t]){var o=this._defaultLocale,i=e.optionsLang[this._defaultLocale]||"";n+="\x3c!--{"+o+"}--\x3e"+i+"\x3c!--/{"+o+"}--\x3e"}return n},t.prototype.localize=function(t,e){var n=this;if(t=t||this._locale,this._locale!==t&&(this._locale=t,this._emitter.emit("change",t)),"undefined"!=typeof document){e?"string"==typeof e&&(e=document.querySelector(e)):e=document.documentElement;for(var o,i=document.createNodeIterator(e,NodeFilter.SHOW_COMMENT,null,!1),a=[],r=[];o=i.nextNode();)a.indexOf(o.parentNode)>=0||/^(script|style|link)$/i.test(o.parentNode.nodeName)||!/^\{[\w-]+\}/.test(o.nodeValue)||(a.push(o.parentNode),r.push(this.parse(o.parentNode.innerHTML)));a.forEach(function(e,o){e.innerHTML=n.build(t,r[o])}),this._attrs.forEach(function(o){var i="data-lang-"+o;[].slice.call(e.querySelectorAll("["+i+"]")).forEach(function(e){var a=e.getAttribute(i),r=n.parse(a);r&&(r.optionsLang[n._defaultLocale]||(r.optionsLang[n._defaultLocale]=e.getAttribute(o)),e.setAttribute(i,n.build(t,r)),e.setAttribute(o,r.optionsLang[t]||r.optionsLang[n._defaultLocale]))})})}},t.prototype.get=function(t,e){e=e||this._locale;var n=this.parse(t);return n?void 0!==n.optionsLang[e]?n.optionsLang[e]:void 0!==n.defaultText?n.defaultText:n.optionsLang[this._defaultLocale]:t},Object.defineProperty(t.prototype,"locale",{get:function(){return this._locale},set:function(t){this._locale!==t&&this.localize(t)},enumerable:!0,configurable:!0}),t}(),i={Languages:o};"function"==typeof define?(define.amd||define.cmd)&&define(function(){return i}):"undefined"!=typeof module&&module.exports?module.exports=i:window.h5i18n=i}();